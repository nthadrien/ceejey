let o=[],r=0;const c=4;let h=e=>{let n=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},lc:0,listen(i){return t.lc=n.push(i),()=>{for(let l=r+c;l<o.length;)o[l]===i?o.splice(l,c):l+=c;let s=n.indexOf(i);~s&&(n.splice(s,1),--t.lc||t.off())}},notify(i,s){let l=!o.length;for(let d of n)o.push(d,t.value,i,s);if(l){for(r=0;r<o.length;r+=c)o[r](o[r+1],o[r+2],o[r+3]);o.length=0}},off(){},set(i){let s=t.value;s!==i&&(t.value=i,t.notify(s))},subscribe(i){let s=t.listen(i);return i(t.value),s},value:e};return t};const L=5,g=6,v=10;let y=(e,n,t,i)=>(e.events=e.events||{},e.events[t+v]||(e.events[t+v]=i(s=>{e.events[t].reduceRight((l,d)=>(d(l),l),{shared:{},...s})})),e.events[t]=e.events[t]||[],e.events[t].push(n),()=>{let s=e.events[t],l=s.indexOf(n);s.splice(l,1),s.length||(delete e.events[t],e.events[t+v](),delete e.events[t+v])}),T=1e3,x=(e,n)=>y(e,i=>{let s=n(i);s&&e.events[g].push(s)},L,i=>{let s=e.listen;e.listen=(...d)=>(!e.lc&&!e.active&&(e.active=!0,i()),s(...d));let l=e.off;return e.events[g]=[],e.off=()=>{l(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let d of e.events[g])d();e.events[g]=[]}},T)},()=>{e.listen=s,e.off=l}}),N=(e={})=>{let n=h(e);return n.setKey=function(t,i){let s=n.value;typeof i>"u"&&t in n.value?(n.value={...n.value},delete n.value[t],n.notify(s,t)):n.value[t]!==i&&(n.value={...n.value,[t]:i},n.notify(s,t))},n},w=e=>e,u={},m={addEventListener(){},removeEventListener(){}};function O(){try{return typeof localStorage<"u"}catch{return!1}}O()&&(u=localStorage);let U={addEventListener(e,n,t){window.addEventListener("storage",n),window.addEventListener("pageshow",t)},removeEventListener(e,n,t){window.removeEventListener("storage",n),window.removeEventListener("pageshow",t)}};typeof window<"u"&&(m=U);function M(e,n=void 0,t={}){let i=t.encode||w,s=t.decode||w,l=h(n),d=l.set;l.set=f=>{typeof f>"u"?delete u[e]:u[e]=i(f),d(f)};function E(f){f.key===e?f.newValue===null?d(void 0):d(s(f.newValue)):u[e]||d(void 0)}function p(){l.set(u[e]?s(u[e]):n)}return x(l,()=>{if(p(),t.listen!==!1)return m.addEventListener(e,E,p),()=>{m.removeEventListener(e,E,p)}}),l}N([]);const a=M("cart",[],{encode:JSON.stringify,decode:JSON.parse}),I=e=>{const n=a.get().findIndex(t=>t.id==e.id&&t.color==e.color);if(n<0)a.set([...a.get(),e]);else{const t=a.get().splice(n,1,{...e,qty:e.qty+1});a.set(t)}S({type:"success",message:`${e.category} was successfully added to cart !!!`})},R=(e,n)=>{const t=a.get().filter(i=>i.id!==e&&i.color!==n);a.set(t)},S=e=>{console.log("working on adding on dom");const n=document.createElement("div");n.className=`d-flex gap-2 align-items-center p-2 shadow position-fixed top-50 start-50 translate-middle bg-${e.type=="danger"?"danger":e.type=="warning"?"warning":"success"}-subtle`,n.role="alert",n.ariaAtomic="true",n.id="toast";let t=`fs-5 bi bi-${e.type=="danger"?"emoji-grimace-fill":e.type=="warning"?"emoji-smile-upside-down-fill":"emoji-laughing-fill"}`;const i=document.createElement("div");i.innerHTML=`<i class="${t}"></i> ${e.message}`,i.className="toast-body d-flex gap-2 text-monospace",n.append(i),document.body.append(n),setTimeout(()=>{document.body.removeChild(n)},5e3)};export{I as a,R as d,S as n,a as s};
