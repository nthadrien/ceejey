let d=[],o=0;const c=4;let h=e=>{let n=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},lc:0,listen(i){return t.lc=n.push(i),()=>{for(let l=o+c;l<d.length;)d[l]===i?d.splice(l,c):l+=c;let s=n.indexOf(i);~s&&(n.splice(s,1),--t.lc||t.off())}},notify(i,s){let l=!d.length;for(let r of n)d.push(r,t.value,i,s);if(l){for(o=0;o<d.length;o+=c)d[o](d[o+1],d[o+2],d[o+3]);d.length=0}},off(){},set(i){let s=t.value;s!==i&&(t.value=i,t.notify(s))},subscribe(i){let s=t.listen(i);return i(t.value),s},value:e};return t};const y=5,v=6,g=10;let L=(e,n,t,i)=>(e.events=e.events||{},e.events[t+g]||(e.events[t+g]=i(s=>{e.events[t].reduceRight((l,r)=>(r(l),l),{shared:{},...s})})),e.events[t]=e.events[t]||[],e.events[t].push(n),()=>{let s=e.events[t],l=s.indexOf(n);s.splice(l,1),s.length||(delete e.events[t],e.events[t+g](),delete e.events[t+g])}),x=1e3,T=(e,n)=>L(e,i=>{let s=n(i);s&&e.events[v].push(s)},y,i=>{let s=e.listen;e.listen=(...r)=>(!e.lc&&!e.active&&(e.active=!0,i()),s(...r));let l=e.off;return e.events[v]=[],e.off=()=>{l(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let r of e.events[v])r();e.events[v]=[]}},x)},()=>{e.listen=s,e.off=l}}),N=(e={})=>{let n=h(e);return n.setKey=function(t,i){let s=n.value;typeof i>"u"&&t in n.value?(n.value={...n.value},delete n.value[t],n.notify(s,t)):n.value[t]!==i&&(n.value={...n.value,[t]:i},n.notify(s,t))},n},w=e=>e,a={},m={addEventListener(){},removeEventListener(){}};function O(){try{return typeof localStorage<"u"}catch{return!1}}O()&&(a=localStorage);let U={addEventListener(e,n,t){window.addEventListener("storage",n),window.addEventListener("pageshow",t)},removeEventListener(e,n,t){window.removeEventListener("storage",n),window.removeEventListener("pageshow",t)}};typeof window<"u"&&(m=U);function M(e,n=void 0,t={}){let i=t.encode||w,s=t.decode||w,l=h(n),r=l.set;l.set=f=>{typeof f>"u"?delete a[e]:a[e]=i(f),r(f)};function E(f){f.key===e?f.newValue===null?r(void 0):r(s(f.newValue)):a[e]||r(void 0)}function p(){l.set(a[e]?s(a[e]):n)}return T(l,()=>{if(p(),t.listen!==!1)return m.addEventListener(e,E,p),()=>{m.removeEventListener(e,E,p)}}),l}N([]);const u=M("cart",[],{encode:JSON.stringify,decode:JSON.parse}),R=e=>{const n=u.get().findIndex(t=>t.id==e.id&&t.color==e.color);if(n<0)u.set([...u.get(),e]);else{const t=u.get().splice(n,1,{...e,qty:e.qty+1});u.set(t)}S({type:"success",message:`${e.category} was successfully added to cart !!!`})},S=e=>{const n=document.createElement("div");n.className=`toast align-items-center border-0 show shadow-lg ${e.type=="danger"?"text-bg-danger":e.type=="warning"?"text-bg-warning":"text-bg-primary"}`,n.role="alert",n.ariaAtomic="true",n.id="toast";let t=`fs-4 me-2 bi  bi-${e.type=="danger"?"emoji-grimace":e.type=="warning"?"emoji-smile-upside-down":"emoji-wink"}`;const i=document.createElement("div");i.innerHTML=`<i class="${t}"></i> ${e.message}`,i.className="toast-body d-flex gap-2 text-monospace",n.append(i),document.body.append(n),setTimeout(()=>{document.body.removeChild(n)},5e3)};export{R as a,S as n,u as s};
